<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="report_carteira_entrega_template">
        <t t-call="web.html_container">
            <style>
                .entrega-report { font-family: Arial, sans-serif; font-size: 11pt; }
                .entrega-report .header-block { margin-bottom: 16px; }
                .entrega-report .header-block p { margin: 2px 0; }
                .entrega-report table.lista-alunos { width: 100%; border-collapse: collapse; margin-top: 12px; }
                .entrega-report table.lista-alunos th,
                .entrega-report table.lista-alunos td { border: 1px solid #333; padding: 8px; text-align: left; vertical-align: top; }
                .entrega-report table.lista-alunos th { background: #eee; font-weight: bold; }
                .entrega-report .col-num { width: 40px; text-align: center; }
                .entrega-report .col-nome { width: 28%; }
                .entrega-report .col-matricula { width: 12%; }
                .entrega-report .col-data { width: 18%; min-height: 32px; }
                .entrega-report .col-assinatura { width: 42%; min-height: 32px; }
                .entrega-report .titulo-principal { text-align: center; font-size: 18pt; font-weight: bold; margin: 0 0 16px 0; letter-spacing: 0.05em; }
                .entrega-report .periodo-destaque,
                .entrega-report .treinamento-destaque { font-size: 12pt; font-weight: bold; margin: 10px 0; padding: 8px; background: #f5f5f5; border: 1px solid #ccc; }
                .entrega-report .finalizacao { margin-top: 24px; padding-top: 16px; border-top: 1px solid #333; }
                .entrega-report .finalizacao .linha-assinatura { margin-top: 32px; }
                .entrega-report .finalizacao .linha-assinatura .traco { border-bottom: 1px solid #333; min-width: 200px; display: inline-block; margin: 0 8px; vertical-align: bottom; }
            </style>
            <t t-foreach="docs" t-as="training">
                <div class="page entrega-report">
                    <p class="titulo-principal">LISTA DE ENTREGA DE CARTEIRAS</p>
                    <div class="header-block">
                        <t t-if="training.company_id.logo">
                            <p style="margin: 0 0 8px 0;">
                                <img t-att-src="image_data_uri(training.company_id.logo)" alt="Logo" style="max-height: 50px; max-width: 180px;"/>
                            </p>
                        </t>
                        <p class="treinamento-destaque">
                            Treinamento: <span t-field="training.name"/>
                        </p>
                        <p style="margin: 0 0 8px 0; font-size: 10pt; line-height: 1.3;">
                            <span t-field="training.description"/>
                        </p>
                        <p class="periodo-destaque">
                            Período do treinamento: <span t-field="training.date_start" t-options='{"widget": "date"}'/>
                            <t t-if="training.date_end"> a <span t-field="training.date_end" t-options='{"widget": "date"}'/></t>
                            — Carga horária: <t t-esc="int(training.workload_hours)"/> horas
                        </p>
                        <p style="margin: 0 0 2px 0;"><span t-field="training.company_id.name"/> — CNPJ: <span t-esc="training.get_company_cnpj()"/></p>
                        <p style="margin: 0 0 2px 0;">Coordenador: <span t-field="training.coordinator_name"/> — Instrutor: <span t-field="training.instructor_name"/></p>
                    </div>
                    <table class="lista-alunos">
                        <thead>
                            <tr>
                                <th class="col-num">Nº</th>
                                <th class="col-nome">Nome do Aluno</th>
                                <th class="col-matricula">Matrícula</th>
                                <th class="col-data">Data da Entrega</th>
                                <th class="col-assinatura">Assinatura do Recebedor</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="training.student_ids" t-as="student">
                                <tr>
                                    <td class="col-num" style="text-align: center;"><t t-esc="student_index + 1"/></td>
                                    <td class="col-nome"><span t-esc="(student.name or '').upper()"/></td>
                                    <td class="col-matricula"><span t-esc="student.matricula or ''"/></td>
                                    <td class="col-data"><span style="display: block; min-height: 24px;">&#160;</span></td>
                                    <td class="col-assinatura"><span style="display: block; min-height: 24px;">&#160;</span></td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                    <div class="finalizacao">
                        <p style="margin: 0 0 8px 0; font-size: 10pt;">Lista conferida e encerrada em ___/___/_____________</p>
                        <div class="linha-assinatura" style="margin-top: 40px;">
                            <span style="font-size: 10pt;">Responsável pela entrega:</span>
                            <span class="traco" style="min-width: 220px;">&#160;</span>
                            <span style="font-size: 10pt;">Data:</span>
                            <span class="traco" style="min-width: 100px;">&#160;</span>
                        </div>
                    </div>
                </div>
            </t>
        </t>
    </template>

</odoo>
